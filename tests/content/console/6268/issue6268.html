
<!DOCTYPE html>
<html>
    <!--
        STEPS TO CREATE A TEST CASE:
        5. Add the exact steps to reproduce the test case under "Steps to reproduce"
        6. Describe what is expected to see under "Expected result"
        7. Add your contact information
        8. Remove all template comments
     -->
    <head>
        <!--
            Add the issue number and title here. 
         -->
        <title>Issue 6268: Expose a clean "console" object to the Command Line</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link href="../../_common/testcase.css" type="text/css" rel="stylesheet"/>
        <script>
            // hack console.debug from the webpage:
            var numberOfCalls = 0;
            console.log = function(invokerName)
            {
                numberOfCalls++;
            }
            function setExpandos()
            {
                // console expandos:
                console.expando = "webpage";
                console.webpageExpando = "webpage";
            }
        </script>
    </head>
    <body>
        <header>
            <h1><a href="http://code.google.com/p/fbug/issues/detail?id=6268">Issue 6268</a>: Expose a clean "console" object to the Command Line</h1>
        </header>
        <div>
            <section id="content">
                <button onclick="setExpandos()" id="setExpandos">Set console expandos</button>
                <button onclick="console.log()" id="hackedConsoleLog">Hacked console.log</button>
            </section>
            <section id="description">
                <!--
                    The steps to reproduce the test case should be described here in detail.
                 -->
                <h3>Steps to reproduce</h3>
                <ol>
                    <li>Open Firebug</li>
                    <li>Enable and switch to the Console Panel</li>
                    <li>Execute: <code>console === window.console</code> (should return <code>false</code>)</li>
                    <li>Execute: <code>console.expando = "commandLine"</code></li>
                    <li>Click on the <i>Set console expandos</i> button</li>
                    <li>Execute: <code>console.expando</code> (should return <code>"commandLine"</code></li>
                    <li>Execute: <code>console.webpageExpando</code> (should return <code>"webpage"</code></li>
                    <li>Execute: <code>console.log("commandLine")</code> (should display <code>"commandLine"</code></li>
                    <li>Execute: <code>window.console.log("console")</code></li>
                    <li>Click on "Hacked console.log"</li>
                    <li>Execute: <code>console.log = function(){window.hackedFromCL = true;}</code>
                    <li>Click again on "Hacked console.log"</li>
                    <li>Execute: <code>hackedFromCL</code> (should return true)</li>
                    <li>Execute: <code>numberOfCalls</code> (should be 2)</li>
                    <li>Execute: <code>console.debug() === "_firebugIgnore"</code> (should be <code>true</code>)</li>
                    <li>Execute: <code>window.console.debug() === undefined</code> (should be <code>true</code>)</li>
                </ol>
            </section>
            <footer>
                Florent FAYOLLE, florent.fayolle69@gmail.com
            </footer>
        </div>
    </body>
</html>
